# Football Association Database Management System

Проект по курсу "Проектирование Баз Данных" - полнофункциональная система управления базой данных для футбольной ассоциации с поддержкой репликации, мониторинга и автоматического бэкапа.

## Технологии

- **СУБД**: PostgreSQL с репликацией через Patroni
- **Миграции**: Flyway для управления версиями БД
- **Контейнеризация**: Docker & Docker Compose
- **Мониторинг**: Prometheus + Grafana с кастомными дашбордами
- **Языки**: SQL, Python, Bash
- **Генерация данных**: Faker для реалистичных тестовых данных

## Структура проекта

```
├── backup/             # Система бэкапов с retention policy
├── db/
│   ├── init/           # Скрипты инициализации БД
│   ├── migrations/     # Миграции Flyway (up/down)
│   └── seed/           # Генератор тестовых данных
├── grafana/            # Дашборды и конфигурация
├── prometheus/         # Метрики и конфигурация
├── query-simulator/    # Сервис тестирования производительности
└── docker-compose.yml  # Оркестрация всех сервисов
```

## Описание предметной области

Комплексная система сбора и анализа футбольной статистики, охватывающая все аспекты футбольной индустрии:

- **Управление персоналиями** - игроки, тренеры, судьи с детальной информацией
- **Клубная структура** - команды, стадионы, бюджеты, контракты
- **Турнирная система** - лиги, кубки, матчи с полной статистикой
- **Игровая аналитика** - голы, передачи, нарушения, замены, травмы
- **Трансферный рынок** - история переходов, финансовые операции
- **Награды и достижения** - индивидуальные и командные успехи

Система предоставляет инструментарий для глубокого анализа футбольных событий, полезный для аналитиков, тренеров, спортивных журналистов и любителей футбола.

**Полное описание проекта**: [PROJECT_DETAILS.md](PROJECT_DETAILS.md)
## Быстрый старт

```bash
# Запуск всей инфраструктуры
docker-compose up -d

# Запуск с сидированием тестовых данных
APP_ENV=dev SEED_COUNT=1000 docker-compose up -d

# Запуск до определенной версии миграций
MIGRATION_VERSION=3 docker-compose up -d
```

## Мониторинг

После запуска доступны:
- **Grafana**: http://localhost:3000 (дашборды БД)
- **Prometheus**: http://localhost:9090 (метрики)

## Основные команды

```bash
# Тестирование идемпотентности миграций
./db/migrations/tests/idempotency_tests.sh

# Ручное создание бэкапа
docker-compose exec backup /scripts/backup.sh

# Запуск тестов производительности
docker-compose run query-simulator
```

## Условия заданий

- [Этап 1: Проектирование](stages/stage1.md)
- [Этап 2: Развертывание](stages/stage2.md)
- [Этап 3: Администрирование](stages/stage3.md)
- [Этап 4: Тестирование миграций](stages/stage4.md)